spec:
  inputs:
    stage:
      type: string
      description: The stage to run the check on
    rev-range:
      type: string
      description: Commit message to check
    tags:
      description: Tags to apply to this job
      type: array
      default: []
    rules:
      description: Rules for this job to run
      type: array
      default:
        - when: never
---
# yaml-language-server: $schema=https://gitlab.com/gitlab-org/gitlab/-/raw/master/app/assets/javascripts/editor/schema/ci.json
"$[[ inputs.stage ]]:commitizen:check-commits-range":
  stage: $[[ inputs.stage ]]
  image: commitizen/commitizen:latest
  before_script:
    - git fetch
  script:
    - cz check --rev-range $[[ inputs.rev-range ]]
  rules: $[[ inputs.rules ]]
  tags: $[[ inputs.tags ]]
